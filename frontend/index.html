<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Fake News Verification Tool</title>
    <style>
        body { font-family: Arial; margin:50px; background:#fff; color:#000; transition:0.3s;}
        body.dark { background:#1e1e1e; color:#f5f5f5; }
        textarea, input[type="text"] { width:100%; font-size:16px; margin-bottom:10px; padding:8px; }
        button { margin-top:10px; padding:10px 20px; font-size:16px; cursor:pointer; }
        #result { margin-top:20px; padding:15px; border-radius:5px; transition:0.3s; }
        .reason { margin-left:20px; color:red; }
        .summary { font-style:italic; margin-bottom:10px; }
    </style>
</head>
<body>
    <h1>Fake News Verification Tool</h1>
    <button onclick="toggleDarkMode()">Toggle Dark Mode</button><br><br>

    <label>Paste News URL (optional):</label>
    <input type="text" id="newsURL" placeholder="Paste URL here...">

    <label>Or Paste News Text:</label>
    <textarea id="newsText" placeholder="Paste news text here..."></textarea>

    <button onclick="verifyNews()">Check Credibility</button>

    <div id="result"></div>

    <script>
        function toggleDarkMode(){ document.body.classList.toggle('dark'); }

        async function verifyNews(){
            let content = document.getElementById('newsText').value;
            const url = document.getElementById('newsURL').value;

            if(!content && !url){ alert("Please enter text or URL!"); return; }

            const responseDiv = document.getElementById('result');
            responseDiv.innerHTML = "Checking...";

            try{
                const response = await fetch("http://127.0.0.1:5001/verify", {
                    method:"POST",
                    headers:{ "Content-Type":"application/json" },
                    body: JSON.stringify({ content: content, url: url })
                });

                if(!response.ok){ throw new Error("Network response was not ok"); }

                const data = await response.json();

                // Color-coded score
                let bgColor = "#d4edda"; // green
                if(data.score < 5) bgColor = "#f8d7da"; // red
                else if(data.score < 7) bgColor = "#fff3cd"; // yellow

                let html = `<div style="background-color:${bgColor};padding:10px;border-radius:5px;">`;
                html += `<h3>Credibility Score: ${data.score}/10</h3>`;

                const summary = data.summary;
                html += `<div class="summary"><strong>Summary:</strong> ${summary}</div>`;

                if(data.reasons.length > 0){
                    html += "<h4>Reasons:</h4><ul>";
                    data.reasons.forEach(reason => { html += `<li class='reason'>${reason}</li>`; });
                    html += "</ul>";
                } else {
                    html += "<p>No issues detected. Seems credible!</p>";
                }

                html += "</div>";
                responseDiv.innerHTML = html;

            }catch(error){
                responseDiv.innerHTML = `<p style="color:red;">Error: ${error}</p>`;
            }
        }
    </script>
</body>
</html>
